{%extends "base.html"%}

{%block content%}
    {%with messages = get_flashed_messages()%}
        {%for message in messages%}
            <div class="alert alert-success alert-dismissible fade show mt-3" role="alert">
                {{message}}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            
        {%endfor%}
    {%endwith%}
    {%if name%}
    <h1>User added !!! </h1><br>
    <!-- <table class="table table-striped table-hover">
        {% for user in our_users%}
        {{user.id}}. <a href="{{url_for('update',id=user.id)}}">{{user.name}}</a> - {{user.email}} -{{user.color}}<br>
        {%endfor%}
    </table> -->
   
    {%else%}
        <h1 class="mt-3 text-center">List of users : </h1>
        <div class="shadow bg-body rounded p-2 mt-3 mb-5">
            <form method="POST" action="">
                {{form.hidden_tag()}}
                {{form.name.label(class='form-label')}}{{form.name(class="form-control mb-3")}}
                {{form.username.label(class='form-label')}}{{form.username(class="form-control mb-3")}}
                {{form.email.label(class='form-label')}}{{form.email(class="form-control mb-3")}}
                {{form.color.label(class='form-label')}}{{form.color(class="form-control mb-3")}}
                {{form.password_hash.label(class='form-label')}}{{form.password_hash(class="form-control mb-3")}}
                {{form.password_hash2.label(class='form-label')}}{{form.password_hash2(class="form-control mb-3")}}

                {{form.submit(class='btn btn-primary')}}
            </form>
        </div>
      
    {%endif%}
    <table class="table table-striped table-hover">
        {% for user in our_users %}
        {{user.id}}. <a href="{{url_for('update',id=user.id)}}">{{user.name}}</a> -{{user.username}} - {{user.email}} - {{user.color}}
        PW : {{user.password_hash}} - <a href="{{url_for('delete',id=user.id)}}">Delete</a>
        <br>
        {%endfor%}
    </table>
    
{%endblock%}